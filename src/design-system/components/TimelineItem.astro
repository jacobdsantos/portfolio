---
/**
 * Individual timeline entry.
 *
 * Usage:
 *   <TimelineItem date="2024 - Present" title="Senior Threat Researcher" category="work">
 *     <p>Description text</p>
 *   </TimelineItem>
 */

interface Props {
  date: string;
  title: string;
  category?: 'work' | 'research' | 'tool' | 'speaking';
  href?: string;
}

const { date, title, category = 'work', href } = Astro.props;

const categoryColors: Record<string, string> = {
  work: 'bg-accent-primary border-accent-primary/30',
  research: 'bg-accent-danger border-accent-danger/30',
  tool: 'bg-accent-tertiary border-accent-tertiary/30',
  speaking: 'bg-accent-secondary border-accent-secondary/30',
};

const dotColor = categoryColors[category] || categoryColors.work;
---

<div class="relative pl-10 group">
  <div class:list={['absolute left-[11px] top-1.5 w-[9px] h-[9px] rounded-full border-2', dotColor]} />
  <div class="card !p-4 hover:!border-accent-primary/20 transition-all">
    <div class="flex items-center gap-2 mb-1">
      <span class="text-text-muted text-[10px] font-mono uppercase tracking-wider">{date}</span>
    </div>
    {href ? (
      <a href={href} class="text-text-primary font-semibold text-sm hover:text-accent-primary transition-colors">{title}</a>
    ) : (
      <h3 class="text-text-primary font-semibold text-sm">{title}</h3>
    )}
    <div class="text-text-muted text-xs leading-relaxed mt-1">
      <slot />
    </div>
  </div>
</div>
