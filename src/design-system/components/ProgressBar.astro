---
/**
 * Horizontal progress/skill bar with label and value.
 *
 * Usage:
 *   <ProgressBar label="Ransomware Analysis" value={95} />
 */

interface Props {
  label: string;
  value: number;
  variant?: 'primary' | 'secondary' | 'tertiary';
  showValue?: boolean;
}

const { label, value, variant = 'primary', showValue = true } = Astro.props;
const clampedValue = Math.max(0, Math.min(100, value));

const barColors: Record<string, string> = {
  primary: 'bg-accent-primary',
  secondary: 'bg-accent-secondary',
  tertiary: 'bg-accent-tertiary',
};

const glowColors: Record<string, string> = {
  primary: 'shadow-[0_0_8px_rgba(240,166,58,0.3)]',
  secondary: 'shadow-[0_0_8px_rgba(108,92,231,0.3)]',
  tertiary: 'shadow-[0_0_8px_rgba(0,180,216,0.3)]',
};
---

<div class="space-y-1.5">
  <div class="flex items-center justify-between">
    <span class="text-text-secondary text-xs font-medium">{label}</span>
    {showValue && <span class="text-text-muted text-[10px] font-mono">{clampedValue}%</span>}
  </div>
  <div class="h-1.5 rounded-full bg-bg-surface/80 border border-white/[0.04] overflow-hidden">
    <div
      class:list={['h-full rounded-full transition-all duration-700 ease-out', barColors[variant], glowColors[variant]]}
      style={`width: ${clampedValue}%`}
      role="progressbar"
      aria-valuenow={clampedValue}
      aria-valuemin={0}
      aria-valuemax={100}
      aria-label={`${label}: ${clampedValue}%`}
    />
  </div>
</div>
