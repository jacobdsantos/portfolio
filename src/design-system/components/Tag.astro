---
/**
 * Compact tag for categorization.
 * Uses tag-* CSS classes from global.css.
 *
 * Usage:
 *   <Tag variant="green" text="Ransomware" />
 *   <Tag variant="purple" text="APT" href="/research?tag=apt" />
 */

interface Props {
  variant?: 'green' | 'purple' | 'cyan' | 'amber' | 'red' | 'blue';
  text: string;
  href?: string;
}

const { variant = 'green', text, href } = Astro.props;
const Tag = href ? 'a' : 'span';

const variantClass: Record<NonNullable<Props['variant']>, string> = {
  green: 'tag-green',
  purple: 'tag-purple',
  cyan: 'tag-cyan',
  amber: 'tag-amber',
  red: 'tag-red',
  blue: 'tag-blue',
};

const linkProps = href
  ? { href, ...(href.startsWith('http') ? { target: '_blank', rel: 'noopener noreferrer' } : {}) }
  : {};
---

<Tag
  class:list={[variantClass[variant], 'cursor-pointer hover:brightness-125 transition-all']}
  {...linkProps}
>{text}</Tag>
